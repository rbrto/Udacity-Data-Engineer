
## Purpose of this Project
A music streaming startup called Sparkify. It has grown their user base and song database and want to move their 
data warehouse to a data lake. Their data resides in S3, in a directory of JSON logs on user activity on the app
as well as a directory of JSON metadata on the songs in their app. 


## Solution
To address the problem faced by Sparkify, an ETL pipeline that makes use of Spark has been developed and deployed on AWS EMR to      extract Sparkyfy's data from S3, processes it using Spark and loads the processed data back into S3 as a set of dimensional          tables. The data lake's purpose is to allow Sparkify's analytics team to continue finding insights in what songs their users are      listening to.

## Prerequisites
* AWS EMR cluster
* Apache Spark
* python 3
   
## Datasets
   The two datasets reside in S3. Here is the links for each:
   * Song data: s3://udacity-dend/song_data
   * Log data: s3://udacity-dend/log_data

    The first data set is a subset of real data from Million Song Dataset. Each file is in JSON format and contains metadata
    about a song and the artist of that song. The files are partitioned by the first three letters of each song's track ID. 
    eg: 
        song_data/A/B/C/TRABCEI128F424C983.json
        song_data/A/A/B/TRAABJL12903CDCF1A.json

    The second data consists of log files in JSON format generated by event simulator based on the songs above. The activity
    log data is simulated from an imaginary music streaming app based on configuration settings.


    You can download the dataset on your desktop and do it locally. After all the process completed, load the output parquet data back to S3.


## This project includes 3 files
    etl.py : reads data from S3, processes the data using Spark and writes them back to S3
    dl.cfg: contains your aws credential ( do not expose them in public)
    README.md: explanation of the project process and decisions

## Schema for Song Play Analysis

### Fact Table: 
* **songplays** - records of log data associated with song plays and these are records with **page= NextSong**
    * songplay_id, start_time, user_id, level, song_id, artist_id, session_id, location, user_agent, year, month

### Dimension Table: 
* **users** - users in the app
    * user_id, first_name, last_name, gender, level
* **songs** - songs in music database
    * song_id, title, artist_id, year, duration
* **artists** - artists in music database
    * artist_id, name, location, lattitude, longitude
* **time** - timestamps of records in songplays broken down into specific units
    * start_time, hour, day, week, month, year, weekday  

  

  
  
